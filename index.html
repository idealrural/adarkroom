<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/CreativeWork">
    <head>
        <!--  
            A Dark Room (v1.4)
            ==================
            
            A minimalist text adventure by Michael Townsend and all his friends.
            Inspired by Candy Box (http://candies.aniwey.net/)
            Contribute on GitHub! (https://github.com/Continuities/adarkroom/)
        -->
        <!--
        Customize this policy to fit your own app's needs. For more guidance, see:
            https://github.com/apache/cordova-plugin-whitelist/blob/master/README.md#content-security-policy
        Some notes:
            * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
            * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
            * Disables use of inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
                * Enable inline JS: add 'unsafe-inline' to default-src
        -->
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width"/>

        <title>A Dark Room</title>
        <meta itemprop="description" name="description" property="og:description" content="A minimalist text adventure">
        <meta itemprop="image" property="og:image" content="img/adr.png" />
        <meta itemprop="name" property="og:title" content="A Dark Room" />
        <link rel="shortcut icon" href="favicon.ico" />
        <link rel="image_src" href="img/adr.png" />

        <script src="lib/jquery.min.js"></script>
        <script src="lib/jquery.color-2.1.2.min.js"></script>
        <script src="lib/jquery.event.move.js"></script>
        <script src="lib/jquery.event.swipe.js"></script>
        <script src="lib/base64.js"></script>
        <script src="lib/translate.js"></script>
        <script type="text/javascript" src="cordova.js"></script>

        <script src="lang/langs.js"></script>
    
        <script>
            // try to read "lang" param's from url
            var lang = decodeURIComponent((new RegExp('[?|&]lang=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g, '%20'))||null;
            // if no language requested, try to read it from local storage
            if(!lang){
                try {
                    lang = localStorage.lang;
                } catch(e) {}
            }
            // if a language different than english requested, load all translations
            if(lang && lang != 'en'){
                document.write('<script src="lang/'+lang+'/strings.js"><\/script>');
                document.write('<link rel="stylesheet" type="text/css" href="lang/'+lang+'/main.css" \/>');
            }
        </script>
        
        <script src="script/Button.js"></script>
        <script src="script/engine.js"></script>
        <script src="script/state_manager.js"></script>
        <script src="script/header.js"></script>
        <script src="script/notifications.js"></script>
        <script src="script/leftsidebar.js"></script>
        <script src="script/events.js"></script>
        <script src="script/room.js"></script>
        <script src="script/outside.js"></script>
        <script src="script/world.js"></script>
        <script src="script/path.js"></script>
        <script src="script/ship.js"></script>
        <script src="script/space.js"></script>
        <script src="script/prestige.js"></script>
        <script src="script/scoring.js"></script>
        <!-- Event modules -->
        <script src="script/events/global.js"></script>
        <script src="script/events/room.js"></script>
        <script src="script/events/outside.js"></script>
        <script src="script/events/encounters.js"></script>
        <script src="script/events/setpieces.js"></script>
        
        <script type='text/javascript'>
            var oldIE = false;
        </script>
        <!--[if lt IE 9]> 
            <script type="text/javascript">oldIE = true;</script> 
        <![endif]-->
        
        <link rel="stylesheet" type="text/css" href="css/main.css" />
        <link rel="stylesheet" type="text/css" href="css/room.css" />
        <link rel="stylesheet" type="text/css" href="css/outside.css" />
        <link rel="stylesheet" type="text/css" href="css/path.css" />
        <link rel="stylesheet" type="text/css" href="css/world.css" />
        <link rel="stylesheet" type="text/css" href="css/ship.css" />
        <link rel="stylesheet" type="text/css" href="css/space.css" />
        
        <script src="script/localization.js"></script>
    </head>
    <body onload="onLoad()">
        
        <script>
            function onLoad() {
                if(( /(ipad|iphone|ipod|android|windows phone)/i.test(navigator.userAgent) )) {
                    document.addEventListener('deviceready', initApp, false);
                } else {
                    initApp();
                }
            }
            var admobid = {};
            if( /(android)/i.test(navigator.userAgent) ) { 
                admobid = { // for Android
                    banner: 'ca-app-pub-9686449561041514/2253422986',
                    interstitial: 'ca-app-pub-9686449561041514/3730156185'
                };
            } else if(/(ipod|iphone|ipad)/i.test(navigator.userAgent)) {
                admobid = { // for iOS
                    banner: 'ca-app-pub-9686449561041514/2253422986',
                    interstitial: 'ca-app-pub-9686449561041514/3730156185'
                };
            } else {
                admobid = { // for Windows Phone
                    banner: 'ca-app-pub-9686449561041514/2253422986',
                    interstitial: 'ca-app-pub-9686449561041514/3730156185'
                };
            }
                
            function initApp() {
                if (! AdMob ) { alert( 'admob plugin not ready' ); return; }
                initAd();
                // display the banner at startup
                createSelectedBanner();
            }
            function initAd(){
                var defaultOptions = {
                    adSize: 'SMART_BANNER',
                    // width: integer, // valid when set adSize 'CUSTOM'
                    // height: integer, // valid when set adSize 'CUSTOM'
                    position: AdMob.AD_POSITION.BOTTOM_CENTER,
                    // offsetTopBar: false, // avoid overlapped by status bar, for iOS7+
                    bgColor: 'black', // color name, or '#RRGGBB'
                    // x: integer,      // valid when set position to 0 / POS_XY
                    // y: integer,      // valid when set position to 0 / POS_XY
                    //isTesting: true, // set to true, to receiving test ad for testing purpose
                    // autoShow: true // auto show interstitial ad when loaded, set to false if prepare/show
                };
                AdMob.setOptions( defaultOptions );
                registerAdEvents();
            }
            // optional, in case respond to events or handle error
            function registerAdEvents() {
                // new events, with variable to differentiate: adNetwork, adType, adEvent
                document.addEventListener('onAdFailLoad', function(data){});
                document.addEventListener('onAdLoaded', function(data){});
                document.addEventListener('onAdPresent', function(data){});
                document.addEventListener('onAdLeaveApp', function(data){});
                document.addEventListener('onAdDismiss', function(data){
                    AdMob.hideBanner();
                });
            }
            
            function createSelectedBanner() {
                AdMob.createBanner( {
                    adId: admobid.banner, 
                    isTesting: false,
                    overlap: false, 
                    offsetTopBar: false, 
                    position: AdMob.AD_POSITION.BOTTOM_CENTER,
                    bgColor: 'black'
                } );
            }

            // function showBannerAtSelectedPosition() {
            //     AdMob.showBanner( getSelectedPosition() );
            // }

            function prepareInterstitial() {
                var autoshow = document.getElementById('autoshow').checked;
                AdMob.prepareInterstitial({adId:admobid.interstitial, autoShow:autoshow});
            }

        </script>


        <div id="setup"></div>
        <div id="wrapper">
            <!--<div id="saveNotify"><script>document.write(_("saved."));</script></div>-->
            <div id="content">
                <div id="outerSlider">
                    <div id="main">
                        <div id="header"></div>
                    </div>
                </div>
            </div>
        </div>
        
    </body>
</html>
